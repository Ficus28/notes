{% extends 'base.html' %}

{% block title %}–ó–∞–º–µ—Ç–∫–∏{% endblock %}

{% block content %}

{% if user.is_authenticated %}
  <h1 class="mb-4">–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏</h1>
  <a class="btn btn-success mb-3" href="{% url 'add_note' %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</a>

  {% if page_obj.has_other_pages %}
    <p class="text-muted">–í—Å–µ–≥–æ: {{ page_obj.paginator.count }} –∑–∞–º–µ—Ç–æ–∫</p>
  {% endif %}

  {% if page_obj %}
    {% for note in page_obj %}
      <div class="card mb-3 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">{{ note.title }}</h5>
          <p class="card-text">{{ note.content|truncatewords_html:40|safe }}</p>
          <a href="{% url 'edit_note' note.id %}" class="btn btn-sm btn-outline-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
          <form action="{% url 'delete_note' note.id %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-outline-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
          </form>
        </div>
      </div>
    {% endfor %}

    <!-- üîΩ –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <nav>
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">¬´ –ù–∞–∑–∞–¥</a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link">¬´ –ù–∞–∑–∞–¥</span>
          </li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
          {% if page_obj.number == num %}
            <li class="page-item active"><span class="page-link">{{ num }}</span></li>
          {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
            <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
          {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä—ë–¥ ¬ª</a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link">–í–ø–µ—Ä—ë–¥ ¬ª</span>
          </li>
        {% endif %}
      </ul>
    </nav>

  {% else %}
    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!</p>
  {% endif %}

{% else %}
  <!-- üîí –ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º -->
  <div class="text-center">
    <h1 class="mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ó–∞–º–µ—Ç–∫–∏ üìù</h1>
    <p class="lead">–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–≤–æ–∏ –∏–¥–µ–∏, –ø–ª–∞–Ω—ã –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.</p>
    <a href="{% url 'register' %}" class="btn btn-success btn-lg mt-3">üöÄ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
    <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg mt-3 ms-2">üîë –í–æ–π—Ç–∏</a>
  </div>

  <hr class="my-5">

  <h3 class="mb-4 text-center">üìå –ü—Ä–∏–º–µ—Ä—ã –∑–∞–º–µ—Ç–æ–∫</h3>
  <div class="row">
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">–ò–¥–µ–∏ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–∞</h5>
          <p class="card-text">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –ø–æ –∫–∞—Ñ–µ –∏ –±–∞—Ä–∞–º üòÑ</p>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ üìö</h5>
          <p class="card-text">‚Äî ¬´–ê—Ç–ª–∞–Ω—Ç —Ä–∞—Å–ø—Ä–∞–≤–∏–ª –ø–ª–µ—á–∏¬ª<br>‚Äî ¬´–¢–æ–Ω–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –ø–æ—Ñ–∏–≥–∏–∑–º–∞¬ª<br>‚Äî ¬´–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä¬ª</p>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">–ü–ª–∞–Ω—ã –Ω–∞ –Ω–µ–¥–µ–ª—é üóì</h5>
          <p class="card-text">‚Äî –ó–∞–∫–æ–Ω—á–∏—Ç—å pet-–ø—Ä–æ–µ–∫—Ç<br>‚Äî –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ Django<br>‚Äî –ö—É–ø–∏—Ç—å—Å—è —Ç–æ—Ä—Ç üéÇ</p>
        </div>
      </div>
    </div>
  </div>
{% endif %}

{% endblock %}
